(()=>{"use strict";const e=(e,t)=>({name:e,length:t}),t=e("Carrier",5),n=e("Battleship",4),o=e("Cruiser",3),c=e("Submarine",3),d=e("Destroyer",2),l=[],a=[],r=[t,n,o,c,d];function u(e,t,n,o,c){const d=r[c.length].length,l=[];let a;for(let c=0;c<d;c+=1)a=n?t[e+c]:t[e+10*c],o&&(a.style.backgroundColor="#756b80"),l.push(Number(a.id));c.push(l)}const i=function(e){const t=document.createElement("dialog"),n=document.createElement("h1"),o=document.createElement("button");return t.classList.add("end-game"),o.classList.add("play-again"),n.textContent=e,o.textContent="play again",t.appendChild(n),t.appendChild(o),document.body.appendChild(t),t};let s;const m=[],p=[];let h;const g=[],C=[],f="rgba(255, 166, 116, 255)",b="rgba(158, 252, 198, 255)";function y(e){i(e).showModal(),document.body.querySelector(".play-again").addEventListener("click",(()=>{window.location.reload()}))}function E(e,t){return e.flat().every((e=>t.includes(e)))}function x(e,t,n,o,c){const d=c.some((t=>t.includes(e))),l=o[e];return d?(l.style.backgroundColor=f,l.textContent="X",t.push(e)):(l.style.backgroundColor=b,n.push(e)),d}function L(){const e=Math.floor(100*Math.random()),t=g.includes(e),n=C.includes(e);t||n?L():(x(e,g,C,s,l),E(l,g)&&y("You Loose"))}function v(e){x(Number(e.target.id),m,p,h,a),E(a,m)?y("You Won"):L()}let S,q;function k(){const e=document.querySelector(".axis"),t=e.textContent;"X"===t&&(e.textContent="Y"),"Y"===t&&(e.textContent="X")}function M(){return"X"===document.querySelector(".axis").textContent}function X(e,t){return 0!==t.length&&t.some((t=>t.includes(e)))}function A(e,t,n){const o=[],c=r[n.length].length;for(let n=0;n<=c;n+=1)t&&o.push(e+n),t||o.push(e+10*n);if(0===n.length)return!1;const d=n.flat();return o.some((e=>d.includes(e)))}function w(e,t,n){const o=r[n.length].length;return t?e%10<=10-o:e%100<100-10*o+10}function Y(){if(a.length===r.length)return;const e=Math.floor(100*Math.random());k();const t=M(),n=X(e,a),o=A(e,t,a),c=w(e,t,a);n||o||!c||u(e,S,t,!1,a),Y()}function N(e){const t=Number(e.target.id),n=M(),o=X(t,l),c=A(t,n,l),d=w(t,n,l);o||c||!d||u(t,S,n,!0,l),l.length!==r.length?function(){const e=document.querySelector(".ship"),t=l.length,{name:n}=r[t],o=` - ${r[t].length}`;e.textContent=n+o}():(Y(),function(){const e=document.querySelector(".game-board > .player-board"),t=document.querySelector("dialog .player-board"),n=document.querySelector("dialog");e.parentElement.replaceChild(t,e),n.remove()}(),s=document.querySelectorAll(".player-board > div"),h=document.querySelectorAll(".computer-board > div"),h.forEach((e=>e.addEventListener("click",v,{once:!0}))))}document.addEventListener("DOMContentLoaded",(function(){S=document.querySelectorAll("dialog .block"),S.forEach((e=>e.addEventListener("click",N))),q=document.querySelector("dialog button"),q.addEventListener("click",k)}));function D(e){for(let t=0;t<100;t+=1){const n=document.createElement("div");n.classList.add("block"),n.setAttribute("id",t),e.appendChild(n)}}(function(e){const t=document.createElement("dialog"),n=document.createElement("div"),o=document.createElement("h2"),c=document.createElement("p"),d=document.createElement("span"),l=document.createElement("button"),a=document.createElement("span"),r=document.createElement("div");return o.textContent="Welcome to battleship game",c.textContent="Place your ",d.textContent="Carrier - 5",l.textContent="AXIS - ",a.textContent="X",n.classList.add("popup"),d.classList.add("ship"),a.classList.add("axis"),r.classList.add("player-board"),n.appendChild(o),c.appendChild(d),n.appendChild(c),l.appendChild(a),n.appendChild(l),n.appendChild(r),e(r),t.appendChild(n),document.body.appendChild(t),t})(D).showModal(),function(){const e=document.querySelector(".game-board"),t=document.createElement("div"),n=document.createElement("div");t.classList.add("player-board"),n.classList.add("computer-board"),D(t),D(n),e.appendChild(t),e.appendChild(n)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxjQUFjLE9BQ3JDaUYsRUFBZ0JsRixTQUFTQyxjQUFjLE9BQzdDZ0UsRUFBWTdELFVBQVVDLElBQUksZ0JBQzFCNkUsRUFBYzlFLFVBQVVDLElBQUksa0JBRzVCcUUsRUFBV1QsR0FDWFMsRUFBV1EsR0FFWEQsRUFBVTFFLFlBQVkwRCxHQUN0QmdCLEVBQVUxRSxZQUFZMkUsRUFDeEIsQ0MvQkFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZW5kR2FtZURpYWxvZy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZXBsYXkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkRGlhbG9nLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzaGlwID0gKG5hbWUsIGxlbmd0aCkgPT4gKHsgbmFtZSwgbGVuZ3RoIH0pXG5cbmNvbnN0IGNhcnJpZXIgPSBzaGlwKCdDYXJyaWVyJywgNSlcbmNvbnN0IGJhdHRsZXNoaXAgPSBzaGlwKCdCYXR0bGVzaGlwJywgNClcbmNvbnN0IGNydWlzZXIgPSBzaGlwKCdDcnVpc2VyJywgMylcbmNvbnN0IHN1Ym1hcmluZSA9IHNoaXAoJ1N1Ym1hcmluZScsIDMpXG5jb25zdCBkZXN0cm95ZXIgPSBzaGlwKCdEZXN0cm95ZXInLCAyKVxuXG5jb25zdCBwbGF5ZXJTaGlwc0xvY2F0aW9uID0gW11cbmNvbnN0IGNvbXB1dGVyU2hpcHNMb2NhdGlvbiA9IFtdXG5jb25zdCBzaGlwcyA9IFtjYXJyaWVyLCBiYXR0bGVzaGlwLCBjcnVpc2VyLCBzdWJtYXJpbmUsIGRlc3Ryb3llcl1cblxuLyoqXG4gKiBwbGFjZSBzaGlwIG9uIGJvYXJkICYgc3RvcmVzIGl0J3MgbG9jYXRpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWxlY3RlZCBsb2NhdGlvbiB0byBwbGFjZSBzaGlwXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBibG9ja3NcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaG9yaXpvbnRhbCBkaXJlY3Rpb24gdG8gcGxhY2Ugc2hpcFxuICogQHBhcmFtIHtib29sZWFufSBwbGF5ZXIgZGV0ZXJtaW5lIHBsYXllciBvciBjb21wdXRlclxuICogQHBhcmFtIHtBcnJheX0gbG9jYXRpb24gdG8gc3RvcmUgc2hpcHNcbiAqL1xuZnVuY3Rpb24gcGxhY2VTaGlwKHNlbGVjdGVkLCBibG9ja3MsIGhvcml6b250YWwsIHBsYXllciwgbG9jYXRpb24pIHtcbiAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXBzW2xvY2F0aW9uLmxlbmd0aF0ubGVuZ3RoXG4gIGNvbnN0IHNoaXBCbG9ja3MgPSBbXVxuICBsZXQgbmV4dEJsb2NrXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGhvcml6b250YWwpIG5leHRCbG9jayA9IGJsb2Nrc1tzZWxlY3RlZCArIGldXG4gICAgZWxzZSBuZXh0QmxvY2sgPSBibG9ja3Nbc2VsZWN0ZWQgKyBpICogMTBdXG4gICAgaWYgKHBsYXllcikgbmV4dEJsb2NrLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNzU2YjgwJ1xuICAgIHNoaXBCbG9ja3MucHVzaChOdW1iZXIobmV4dEJsb2NrLmlkKSlcbiAgfVxuICBsb2NhdGlvbi5wdXNoKHNoaXBCbG9ja3MpXG59XG5cbmV4cG9ydCB7IHNoaXBzLCBwbGFjZVNoaXAsIHBsYXllclNoaXBzTG9jYXRpb24sIGNvbXB1dGVyU2hpcHNMb2NhdGlvbiB9XG4iLCIvKipcbiAqIGNyZXN0ZXMgYSBkaWFsb2cgdG8gZGlzcGxheSB3aW5uZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIHdpbiBvciBsb29zZVxuICogQHJldHVybnMge0hUTUxEaWFsb2dFbGVtZW50fVxuICovXG5mdW5jdGlvbiBnYW1lT3ZlckRpYWxvZyhtZXNzYWdlKSB7XG4gIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpYWxvZycpXG4gIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG5cbiAgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ2VuZC1nYW1lJylcbiAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3BsYXktYWdhaW4nKVxuXG4gIGhlYWRpbmcudGV4dENvbnRlbnQgPSBtZXNzYWdlXG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdwbGF5IGFnYWluJ1xuXG4gIGRpYWxvZy5hcHBlbmRDaGlsZChoZWFkaW5nKVxuICBkaWFsb2cuYXBwZW5kQ2hpbGQoYnV0dG9uKVxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpYWxvZylcblxuICByZXR1cm4gZGlhbG9nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVPdmVyRGlhbG9nXG4iLCJpbXBvcnQgeyBwbGF5ZXJTaGlwc0xvY2F0aW9uLCBjb21wdXRlclNoaXBzTG9jYXRpb24gfSBmcm9tICcuL3NoaXAnXG5pbXBvcnQgZ2FtZU92ZXJEaWFsb2cgZnJvbSAnLi9lbmRHYW1lRGlhbG9nJ1xuXG5sZXQgcGxheWVyQmxvY2tzXG5jb25zdCBwbGF5ZXJIaXRzID0gW11cbmNvbnN0IHBsYXllck1pc3NlcyA9IFtdXG5cbmxldCBjb21wdXRlckJsb2Nrc1xuY29uc3QgY29tcHV0ZXJIaXRzID0gW11cbmNvbnN0IGNvbXB1dGVyTWlzc2VzID0gW11cblxuY29uc3QgSElUID0gJ3JnYmEoMjU1LCAxNjYsIDExNiwgMjU1KSdcbmNvbnN0IE1JU1MgPSAncmdiYSgxNTgsIDI1MiwgMTk4LCAyNTUpJ1xuXG4vKipcbiAqIGRpc3BsYXkgZGlhbG9nIHdpdGggZ2FtZSByZXN1bHRzXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSB3aW4gb3IgbG9vc2VcbiAqL1xuZnVuY3Rpb24gZ2FtZU92ZXIobWVzc2FnZSkge1xuICBnYW1lT3ZlckRpYWxvZyhtZXNzYWdlKS5zaG93TW9kYWwoKVxuICBjb25zdCBidG4gPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LWFnYWluJylcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICB9KVxufVxuXG4vKipcbiAqIGNoZWNrIGZvciBhIHBvc3NpYmxlIHdpbm5lclxuICogQHBhcmFtIHtBcnJheX0gc2hpcExvY2F0aW9uc1xuICogQHBhcmFtIHtBcnJheX0gaGl0c1xuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNoZWNrV2lubmVyKHNoaXBMb2NhdGlvbnMsIGhpdHMpIHtcbiAgY29uc3QgbG9jYXRpb25zID0gc2hpcExvY2F0aW9ucy5mbGF0KClcbiAgcmV0dXJuIGxvY2F0aW9ucy5ldmVyeSgobnVtKSA9PiBoaXRzLmluY2x1ZGVzKG51bSkpXG59XG5cbi8qKlxuICogY2hlY2sgd2VhdGhlciBpdCdzIGEgaGl0IG9yIG1pc3MgYW5kIHVwZGF0ZSBhY2NvcmRpbmdseVxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCB0byBoaXRcbiAqIEBwYXJhbSB7QXJyYXl9IGhpdCB0byBzdG9yZSBoaXRzXG4gKiBAcGFyYW0ge0FycmF5fSBtaXNzIHRvIHN0b3JlIG1pc3Nlc1xuICogQHBhcmFtIHtOb2RlTGlzdH0gYm9hcmRcbiAqIEBwYXJhbSB7QXJyYXl9IHNoaXBMb2NhdGlvbiB0byBjaGVjayBoaXQgb3IgbWlzc1xuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNoZWNrSGl0cyh0YXJnZXQsIGhpdCwgbWlzcywgYm9hcmQsIHNoaXBMb2NhdGlvbikge1xuICBjb25zdCB2YWxpZGF0ZSA9IHNoaXBMb2NhdGlvbi5zb21lKChhcnJheSkgPT4gYXJyYXkuaW5jbHVkZXModGFyZ2V0KSlcbiAgY29uc3QgYmxvY2sgPSBib2FyZFt0YXJnZXRdXG4gIGlmICh2YWxpZGF0ZSkge1xuICAgIGJsb2NrLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IEhJVFxuICAgIGJsb2NrLnRleHRDb250ZW50ID0gJ1gnXG4gICAgaGl0LnB1c2godGFyZ2V0KVxuICB9IGVsc2Uge1xuICAgIGJsb2NrLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IE1JU1NcbiAgICBtaXNzLnB1c2godGFyZ2V0KVxuICB9XG4gIHJldHVybiB2YWxpZGF0ZVxufVxuXG4vKipcbiAqIHNlbmQgY29tcHV0ZXIgZ2VuZXJhdGVkIHRhcmdldCB0byBjaGVja0hpdHMoKVxuICogJiBjYWxscyBjaGVja1dpbm5lcigpIHRvIGNoZWNrIGZvciBhIHdpblxuICovXG5mdW5jdGlvbiBjb21wdXRlcigpIHtcbiAgY29uc3QgdGFyZ2V0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKVxuICBjb25zdCBpbkhpdCA9IGNvbXB1dGVySGl0cy5pbmNsdWRlcyh0YXJnZXQpXG4gIGNvbnN0IGluTWlzcyA9IGNvbXB1dGVyTWlzc2VzLmluY2x1ZGVzKHRhcmdldClcbiAgaWYgKCFpbkhpdCAmJiAhaW5NaXNzKSB7XG4gICAgY2hlY2tIaXRzKFxuICAgICAgdGFyZ2V0LFxuICAgICAgY29tcHV0ZXJIaXRzLFxuICAgICAgY29tcHV0ZXJNaXNzZXMsXG4gICAgICBwbGF5ZXJCbG9ja3MsXG4gICAgICBwbGF5ZXJTaGlwc0xvY2F0aW9uXG4gICAgKVxuICAgIGlmIChjaGVja1dpbm5lcihwbGF5ZXJTaGlwc0xvY2F0aW9uLCBjb21wdXRlckhpdHMpKSBnYW1lT3ZlcignWW91IExvb3NlJylcbiAgfSBlbHNlIGNvbXB1dGVyKCkgLy8gcmVjdXJzaXZlIGNhbGxpbmdcbn1cblxuLyoqXG4gKiBzZW5kIHBsYXllciBzZWxlY3RlZCB0YXJnZXQgdG8gY2hlY2tIaXRzKClcbiAqICYgY2FsbHMgY2hlY2tXaW5uZXIoKSB0byBjaGVjayBmb3IgYSB3aW5cbiAqIEBwYXJhbSB7RWxlbWVudH0gYmxvY2tcbiAqL1xuZnVuY3Rpb24gcGxheWVyKGJsb2NrKSB7XG4gIGNvbnN0IHRhcmdldCA9IE51bWJlcihibG9jay50YXJnZXQuaWQpXG4gIGNoZWNrSGl0cyhcbiAgICB0YXJnZXQsXG4gICAgcGxheWVySGl0cyxcbiAgICBwbGF5ZXJNaXNzZXMsXG4gICAgY29tcHV0ZXJCbG9ja3MsXG4gICAgY29tcHV0ZXJTaGlwc0xvY2F0aW9uXG4gIClcbiAgaWYgKGNoZWNrV2lubmVyKGNvbXB1dGVyU2hpcHNMb2NhdGlvbiwgcGxheWVySGl0cykpIGdhbWVPdmVyKCdZb3UgV29uJylcbiAgZWxzZSBjb21wdXRlcigpXG59XG5cbi8vIGluaXRpYWxpemUncyBET00gcXVlcmllc1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUdhbWVQbGF5KCkge1xuICBwbGF5ZXJCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheWVyLWJvYXJkID4gZGl2JylcbiAgY29tcHV0ZXJCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcHV0ZXItYm9hcmQgPiBkaXYnKVxuICBjb21wdXRlckJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT5cbiAgICBibG9jay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXllciwgeyBvbmNlOiB0cnVlIH0pXG4gIClcbn1cblxuZXhwb3J0IHsgaW5pdGlhbGl6ZUdhbWVQbGF5LCBjaGVja0hpdHMsIGNoZWNrV2lubmVyIH1cbiIsImltcG9ydCB7IGluaXRpYWxpemVHYW1lUGxheSB9IGZyb20gJy4vZ2FtZXBsYXknXG5pbXBvcnQge1xuICBzaGlwcyxcbiAgcGxhY2VTaGlwLFxuICBwbGF5ZXJTaGlwc0xvY2F0aW9uLFxuICBjb21wdXRlclNoaXBzTG9jYXRpb24sXG59IGZyb20gJy4vc2hpcCdcblxubGV0IGJsb2Nrc1xubGV0IGJ0bkF4aXNcblxuLyoqXG4gKiBjaGFuZ2UgYXhpcyBmcm9tIGhvcml6b250YWwgdG8gdmVydGljYWwgJiB2aWNlIHZlcnNhXG4gKiAnWCcgaG9yaXpvbnRhbCwgJ1knIHZlcnRpY2FsXG4gKi9cbmZ1bmN0aW9uIGNoYW5nZUF4aXMoKSB7XG4gIGNvbnN0IGF4aXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXhpcycpXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGF4aXMudGV4dENvbnRlbnRcbiAgaWYgKGRpcmVjdGlvbiA9PT0gJ1gnKSBheGlzLnRleHRDb250ZW50ID0gJ1knXG4gIGlmIChkaXJlY3Rpb24gPT09ICdZJykgYXhpcy50ZXh0Q29udGVudCA9ICdYJ1xufVxuXG4vKipcbiAqIGNoZWNrIHdlYXRoZXIgdGhlIGF4aXMgaXMgaG9yaXpvbnRhbCBvciBub3RcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0hvcml6b250YWwoKSB7XG4gIGNvbnN0IGF4aXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXhpcycpLnRleHRDb250ZW50XG4gIHJldHVybiBheGlzID09PSAnWCdcbn1cblxuLyoqXG4gKiBjaGVjayBpZiB0aGVyZSBpcyBhIHNoaXAgYXQgc2VsZWN0ZWQgYmxvY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBibG9jayBzZWxlY3RlZCBibG9jayBvbiBncmlkXG4gKiBAcGFyYW0ge0FycmF5fSBzaGlwTG9jYXRpb24gbG9jYXRpb24gb2YgcHJldmlvdXMgc2hpcHNcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBzaGlwSW5QbGFjZShibG9jaywgc2hpcExvY2F0aW9uKSB7XG4gIGlmIChzaGlwTG9jYXRpb24ubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHNoaXBMb2NhdGlvbi5zb21lKChsb2NhdGlvbikgPT4gbG9jYXRpb24uaW5jbHVkZXMoYmxvY2spKVxufVxuXG4vKipcbiAqIGNoZWNrIGNvbXB1dGVyIHNoaXBzIG92ZXJsYXBwaW5nIHdpdGggcHJldmlvdXMgb25lc1xuICogQHBhcmFtIHtudW1iZXJ9IGlkIHNlbGVjdGVkIGJsb2NrIG9uIGdyaWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaG9yaXpvbnRhbCBkaXJlY3Rpb24gb2Ygc2hpcFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNoZWNrU2hpcE92ZXJsYXAoaWQsIGhvcml6b250YWwsIHNoaXBMb2NhdGlvbikge1xuICBjb25zdCBjdXJyZW50U2hpcCA9IFtdXG4gIGNvbnN0IHNoaXBMZW5ndGggPSBzaGlwc1tzaGlwTG9jYXRpb24ubGVuZ3RoXS5sZW5ndGhcbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2hpcExlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGhvcml6b250YWwpIGN1cnJlbnRTaGlwLnB1c2goaWQgKyBpKVxuICAgIGlmICghaG9yaXpvbnRhbCkgY3VycmVudFNoaXAucHVzaChpZCArIGkgKiAxMClcbiAgfVxuICBpZiAoc2hpcExvY2F0aW9uLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gIGNvbnN0IHByZXZpb3VzU2hpcHMgPSBzaGlwTG9jYXRpb24uZmxhdCgpXG4gIHJldHVybiBjdXJyZW50U2hpcC5zb21lKChudW0pID0+IHByZXZpb3VzU2hpcHMuaW5jbHVkZXMobnVtKSlcbn1cblxuLyoqXG4gKiBjaGVjayBpZiB0aGUgc2hpcCBjYW4gYmUgcGxhY2VkIGF0IHNlbGVjdGVkIGxvY2F0aW9uIG9yIG5vdFxuICogQHBhcmFtIHtudW1iZXJ9IHNlbGVjdGVkIGJsb2NrIG9uIHRoZSBncmlkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhvcml6b250YWwgZGlyZWN0aW9uIHRvIHBsYWNlIHNoaXBcbiAqIEBwYXJhbSB7QXJyYXl9IHNoaXBMb2NhdGlvbiB0byBnZXQgdGhlIGN1cnJlbnQgc2hpcCBsZW5ndGhcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1ZhbGlkUG9zaXRpb24oc2VsZWN0ZWQsIGhvcml6b250YWwsIHNoaXBMb2NhdGlvbikge1xuICBjb25zdCB3aWR0aCA9IDEwXG4gIGNvbnN0IGhlaWdodCA9IHdpZHRoICogd2lkdGhcbiAgY29uc3Qgc2hpcExlbmd0aCA9IHNoaXBzW3NoaXBMb2NhdGlvbi5sZW5ndGhdLmxlbmd0aFxuICBpZiAoaG9yaXpvbnRhbCkgcmV0dXJuIHNlbGVjdGVkICUgd2lkdGggPD0gd2lkdGggLSBzaGlwTGVuZ3RoXG4gIHJldHVybiBzZWxlY3RlZCAlIGhlaWdodCA8IHdpZHRoICsgKGhlaWdodCAtIHdpZHRoICogc2hpcExlbmd0aClcbn1cblxuLyoqXG4gKiByZXBsYWNlIHBsYXllci1ib2FyZCB3aXRoIGJvYXJkIGluIGRpYWxvZ1xuICogJiByZW1vdmVzIGRpYWxvZyBmcm9tIERPTVxuICovXG5mdW5jdGlvbiBjbG9zZURpYWxvZygpIHtcbiAgY29uc3QgcGxheWVyQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1ib2FyZCA+IC5wbGF5ZXItYm9hcmQnKVxuICBjb25zdCBkaWFsb2dCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpYWxvZyAucGxheWVyLWJvYXJkJylcbiAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGlhbG9nJylcbiAgcGxheWVyQm9hcmQucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQoZGlhbG9nQm9hcmQsIHBsYXllckJvYXJkKVxuICBkaWFsb2cucmVtb3ZlKClcbn1cblxuLy8gZGlzcGxheSBpbmZvIG9mIG5leHQgc2hpcCB0byBiZSBwbGFjZWRcbmZ1bmN0aW9uIG5leHRTaGlwKCkge1xuICBjb25zdCBzaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaXAnKVxuICBjb25zdCB2YWx1ZSA9IHBsYXllclNoaXBzTG9jYXRpb24ubGVuZ3RoXG4gIGNvbnN0IHsgbmFtZSB9ID0gc2hpcHNbdmFsdWVdXG4gIGNvbnN0IHNoaXBMZW5ndGggPSBgIC0gJHtzaGlwc1t2YWx1ZV0ubGVuZ3RofWBcbiAgc2hpcC50ZXh0Q29udGVudCA9IG5hbWUgKyBzaGlwTGVuZ3RoXG59XG5cbi8qKlxuICogY2hlY2tzIGlmIHNoaXAgcGxhY2VtZW50IGlzIHBvc3NpYmxlXG4gKiBjYWxscyBwbGFjZVNoaXAoKSBmdW5jdGlvbiB0byBwbGFjZSBzaGlwXG4gKi9cbmZ1bmN0aW9uIGFkZENvbXB1dGVyU2hpcHMoKSB7XG4gIC8vICBjaGVjayBpZiBhbGwgc2hpcHMgYXJlIHBsYWNlZFxuICBpZiAoY29tcHV0ZXJTaGlwc0xvY2F0aW9uLmxlbmd0aCA9PT0gc2hpcHMubGVuZ3RoKSByZXR1cm5cbiAgY29uc3QgaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG5cbiAgLy8gY2hhbmdlIGF4aXMgb24gZWFjaCBjYWxsIHRvIHJhbmRvbWl6ZSBzaGlwc1xuICBjaGFuZ2VBeGlzKClcbiAgY29uc3QgaG9yaXpvbnRhbCA9IGlzSG9yaXpvbnRhbCgpXG4gIGNvbnN0IG9jY3VwaWVkID0gc2hpcEluUGxhY2UoaWQsIGNvbXB1dGVyU2hpcHNMb2NhdGlvbilcbiAgY29uc3Qgb3ZlcmxhcGluZyA9IGNoZWNrU2hpcE92ZXJsYXAoaWQsIGhvcml6b250YWwsIGNvbXB1dGVyU2hpcHNMb2NhdGlvbilcbiAgY29uc3QgdmFsaWRQb3NpdGlvbiA9IGlzVmFsaWRQb3NpdGlvbihpZCwgaG9yaXpvbnRhbCwgY29tcHV0ZXJTaGlwc0xvY2F0aW9uKVxuICBpZiAoIW9jY3VwaWVkICYmICFvdmVybGFwaW5nICYmIHZhbGlkUG9zaXRpb24pXG4gICAgcGxhY2VTaGlwKGlkLCBibG9ja3MsIGhvcml6b250YWwsIGZhbHNlLCBjb21wdXRlclNoaXBzTG9jYXRpb24pXG5cbiAgLy8gcmVjdXJzaXZlIGNhbGxpbmdcbiAgYWRkQ29tcHV0ZXJTaGlwcygpXG59XG5cbi8qKlxuICogY2hlY2tzIGlmIHNoaXAgcGxhY2VtZW50IGlzIHBvc3NpYmxlXG4gKiBjYWxscyBwbGFjZVNoaXAoKSBmdW5jdGlvbiB0byBwbGFjZSBzaGlwXG4gKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fSBibG9jayBzZWxlY3RlZCBieSB0aGUgcGxheWVyXG4gKi9cbmZ1bmN0aW9uIGFkZFBsYXllclNoaXBzKGJsb2NrKSB7XG4gIGNvbnN0IGlkID0gTnVtYmVyKGJsb2NrLnRhcmdldC5pZClcbiAgY29uc3QgaG9yaXpvbnRhbCA9IGlzSG9yaXpvbnRhbCgpXG4gIGNvbnN0IG9jY3VwaWVkID0gc2hpcEluUGxhY2UoaWQsIHBsYXllclNoaXBzTG9jYXRpb24pXG4gIGNvbnN0IG92ZXJsYXBpbmcgPSBjaGVja1NoaXBPdmVybGFwKGlkLCBob3Jpem9udGFsLCBwbGF5ZXJTaGlwc0xvY2F0aW9uKVxuICBjb25zdCB2YWxpZFBvc2l0aW9uID0gaXNWYWxpZFBvc2l0aW9uKGlkLCBob3Jpem9udGFsLCBwbGF5ZXJTaGlwc0xvY2F0aW9uKVxuICBpZiAoIW9jY3VwaWVkICYmICFvdmVybGFwaW5nICYmIHZhbGlkUG9zaXRpb24pXG4gICAgcGxhY2VTaGlwKGlkLCBibG9ja3MsIGhvcml6b250YWwsIHRydWUsIHBsYXllclNoaXBzTG9jYXRpb24pXG5cbiAgLy8gIGNoZWNrcyBpZiBhbGwgcGxheWVyIHNoaXBzIGFyZSBwbGFjZWRcbiAgaWYgKHBsYXllclNoaXBzTG9jYXRpb24ubGVuZ3RoICE9PSBzaGlwcy5sZW5ndGgpIG5leHRTaGlwKClcbiAgZWxzZSB7XG4gICAgYWRkQ29tcHV0ZXJTaGlwcygpXG4gICAgY2xvc2VEaWFsb2coKVxuICAgIGluaXRpYWxpemVHYW1lUGxheSgpXG4gIH1cbn1cblxuZnVuY3Rpb24gcXVlcmllcygpIHtcbiAgYmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGlhbG9nIC5ibG9jaycpXG4gIGJsb2Nrcy5mb3JFYWNoKChibG9jaykgPT4gYmxvY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQbGF5ZXJTaGlwcykpXG4gIGJ0bkF4aXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaWFsb2cgYnV0dG9uJylcbiAgYnRuQXhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoYW5nZUF4aXMpXG59XG5cbmV4cG9ydCB7IHF1ZXJpZXMsIHNoaXBJblBsYWNlLCBjaGVja1NoaXBPdmVybGFwLCBpc1ZhbGlkUG9zaXRpb24gfVxuIiwiaW1wb3J0IHsgcXVlcmllcyB9IGZyb20gJy4vcGxheWVyJ1xuXG4vKipcbiAqIGNyZXN0ZXMgYSBkaWFsb2cgdG9cbiAqIGRpc3BsYXkgaW5mbyBhYm91dCBzaGlwc1xuICogJiBib2FyZCB0byBwbGFjZSBwbGF5ZXIgc2hpcHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRvIGNyZWF0ZSBjaGlkIGRpdidzIGZvciBib2FyZFxuICogQHJldHVybnMge0hUTUxEaWFsb2dFbGVtZW50fVxuICovXG5mdW5jdGlvbiBjcmVhdGVNb2RhbChjcmVhdGVHcmlkKSB7XG4gIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpYWxvZycpXG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJylcbiAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICBjb25zdCBzaGlwTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICBjb25zdCBheGlzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgY29uc3QgYXhpc1R5cGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIGhlYWRpbmcudGV4dENvbnRlbnQgPSAnV2VsY29tZSB0byBiYXR0bGVzaGlwIGdhbWUnXG4gIG1lc3NhZ2UudGV4dENvbnRlbnQgPSAnUGxhY2UgeW91ciAnXG4gIHNoaXBOYW1lLnRleHRDb250ZW50ID0gJ0NhcnJpZXIgLSA1J1xuICBheGlzLnRleHRDb250ZW50ID0gJ0FYSVMgLSAnXG4gIGF4aXNUeXBlLnRleHRDb250ZW50ID0gJ1gnXG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwJylcbiAgc2hpcE5hbWUuY2xhc3NMaXN0LmFkZCgnc2hpcCcpXG4gIGF4aXNUeXBlLmNsYXNzTGlzdC5hZGQoJ2F4aXMnKVxuICBib2FyZC5jbGFzc0xpc3QuYWRkKCdwbGF5ZXItYm9hcmQnKVxuXG4gIHBvcHVwLmFwcGVuZENoaWxkKGhlYWRpbmcpXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQoc2hpcE5hbWUpXG4gIHBvcHVwLmFwcGVuZENoaWxkKG1lc3NhZ2UpXG4gIGF4aXMuYXBwZW5kQ2hpbGQoYXhpc1R5cGUpXG4gIHBvcHVwLmFwcGVuZENoaWxkKGF4aXMpXG4gIHBvcHVwLmFwcGVuZENoaWxkKGJvYXJkKVxuXG4gIGNyZWF0ZUdyaWQoYm9hcmQpXG4gIGRpYWxvZy5hcHBlbmRDaGlsZChwb3B1cClcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpXG5cbiAgcmV0dXJuIGRpYWxvZ1xufVxuXG4vKipcbiAqIGluaXRpYWxpemUncyBET00gcXVlcmllc1xuICogQGFyZ3VtZW50IHtGdW5jdGlvbn0gcXVlcmllc1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgcXVlcmllcylcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlTW9kYWxcbiIsImltcG9ydCBjcmVhdGVNb2RhbCBmcm9tICcuL2dhbWVib2FyZERpYWxvZydcblxuLyoqXG4gKiBjcmVhdGVzIDEwMCAnZGl2cycgd2l0aCBhbiAnaWQnXG4gKiBAcGFyYW0ge0hUTUxEaXZFbGVtZW50fSBib2FyZCB0byBhcHBlbmQgdGhlICdkaXYncydcbiAqL1xuZnVuY3Rpb24gY3JlYXRlR3JpZChib2FyZCkge1xuICBjb25zdCBncmlkU2l6ZSA9IDEwMFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRTaXplOyBpICs9IDEpIHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdibG9jaycpXG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCBpKVxuICAgIGJvYXJkLmFwcGVuZENoaWxkKGRpdilcbiAgfVxufVxuXG4vKipcbiAqIGNyZWF0ZXMgYSBib2FyZCBmb3IgYm90aCBwbGF5ZXIgJiBjb21wdXRlclxuICogYXBwZW5kcyBpdCB0byB0aGUgbWFpbiBnYW1lLWJvYXJkXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVHYW1lKCkge1xuICBjb25zdCBnYW1lQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1ib2FyZCcpXG4gIGNvbnN0IHBsYXllckJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgY29uc3QgY29tcHV0ZXJCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIHBsYXllckJvYXJkLmNsYXNzTGlzdC5hZGQoJ3BsYXllci1ib2FyZCcpXG4gIGNvbXB1dGVyQm9hcmQuY2xhc3NMaXN0LmFkZCgnY29tcHV0ZXItYm9hcmQnKVxuXG4gIC8vIGNyZWF0aW5nIGNoaWxkICdkaXYncycgZm9yIGJvdGggcGxheWVyIGJvYXJkc1xuICBjcmVhdGVHcmlkKHBsYXllckJvYXJkKVxuICBjcmVhdGVHcmlkKGNvbXB1dGVyQm9hcmQpXG5cbiAgZ2FtZUJvYXJkLmFwcGVuZENoaWxkKHBsYXllckJvYXJkKVxuICBnYW1lQm9hcmQuYXBwZW5kQ2hpbGQoY29tcHV0ZXJCb2FyZClcbn1cblxuLyoqXG4gKiBkaXNwbGF5J3MgcmV0dXJuZWQgZGlhbG9nIG1vZGFsXG4gKiBAYXJndW1lbnQge0Z1bmN0aW9ufSBjcmVhdGVHcmlkXG4gKi9cbmNyZWF0ZU1vZGFsKGNyZWF0ZUdyaWQpLnNob3dNb2RhbCgpXG5cbmV4cG9ydCB7IGNyZWF0ZUdyaWQsIGluaXRpYWxpemVHYW1lIH1cbiIsImltcG9ydCB7IGluaXRpYWxpemVHYW1lIH0gZnJvbSAnLi9tb2R1bGVzL2dhbWVib2FyZCdcblxuaW5pdGlhbGl6ZUdhbWUoKVxuIl0sIm5hbWVzIjpbInNoaXAiLCJuYW1lIiwibGVuZ3RoIiwiY2FycmllciIsImJhdHRsZXNoaXAiLCJjcnVpc2VyIiwic3VibWFyaW5lIiwiZGVzdHJveWVyIiwicGxheWVyU2hpcHNMb2NhdGlvbiIsImNvbXB1dGVyU2hpcHNMb2NhdGlvbiIsInNoaXBzIiwicGxhY2VTaGlwIiwic2VsZWN0ZWQiLCJibG9ja3MiLCJob3Jpem9udGFsIiwicGxheWVyIiwibG9jYXRpb24iLCJzaGlwTGVuZ3RoIiwic2hpcEJsb2NrcyIsIm5leHRCbG9jayIsImkiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInB1c2giLCJOdW1iZXIiLCJpZCIsIm1lc3NhZ2UiLCJkaWFsb2ciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJoZWFkaW5nIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJwbGF5ZXJCbG9ja3MiLCJwbGF5ZXJIaXRzIiwicGxheWVyTWlzc2VzIiwiY29tcHV0ZXJCbG9ja3MiLCJjb21wdXRlckhpdHMiLCJjb21wdXRlck1pc3NlcyIsIkhJVCIsIk1JU1MiLCJnYW1lT3ZlciIsImdhbWVPdmVyRGlhbG9nIiwic2hvd01vZGFsIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJyZWxvYWQiLCJjaGVja1dpbm5lciIsInNoaXBMb2NhdGlvbnMiLCJoaXRzIiwiZmxhdCIsImV2ZXJ5IiwibnVtIiwiaW5jbHVkZXMiLCJjaGVja0hpdHMiLCJ0YXJnZXQiLCJoaXQiLCJtaXNzIiwiYm9hcmQiLCJzaGlwTG9jYXRpb24iLCJ2YWxpZGF0ZSIsInNvbWUiLCJhcnJheSIsImJsb2NrIiwiY29tcHV0ZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbkhpdCIsImluTWlzcyIsImJ0bkF4aXMiLCJjaGFuZ2VBeGlzIiwiYXhpcyIsImRpcmVjdGlvbiIsImlzSG9yaXpvbnRhbCIsInNoaXBJblBsYWNlIiwiY2hlY2tTaGlwT3ZlcmxhcCIsImN1cnJlbnRTaGlwIiwicHJldmlvdXNTaGlwcyIsImlzVmFsaWRQb3NpdGlvbiIsIndpZHRoIiwiYWRkQ29tcHV0ZXJTaGlwcyIsIm9jY3VwaWVkIiwib3ZlcmxhcGluZyIsInZhbGlkUG9zaXRpb24iLCJhZGRQbGF5ZXJTaGlwcyIsInZhbHVlIiwibmV4dFNoaXAiLCJwbGF5ZXJCb2FyZCIsImRpYWxvZ0JvYXJkIiwicGFyZW50RWxlbWVudCIsInJlcGxhY2VDaGlsZCIsInJlbW92ZSIsImNsb3NlRGlhbG9nIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJvbmNlIiwiY3JlYXRlR3JpZCIsImRpdiIsInNldEF0dHJpYnV0ZSIsInBvcHVwIiwic2hpcE5hbWUiLCJheGlzVHlwZSIsImNyZWF0ZU1vZGFsIiwiZ2FtZUJvYXJkIiwiY29tcHV0ZXJCb2FyZCIsImluaXRpYWxpemVHYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==